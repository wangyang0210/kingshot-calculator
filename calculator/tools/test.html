<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8">
  <title>í‚¹ìƒ· ì¤‘ë… ìê°€ì§„ë‹¨ í…ŒìŠ¤íŠ¸</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <style>
    :root{
      --brand:#0b57d0;
      --ink:#222;
      --bg:#f5f7fb;
      --card:#fff;
      --line:#e6e8ef;
      --ok-bg:#e0f7fa;     --ok-ink:#00796b;
      --warn-bg:#fff3e0;   --warn-ink:#e65100;
      --danger-bg:#ffebee; --danger-ink:#c62828;
      --radius:12px;
      --shadow:0 6px 18px rgba(0,0,0,.06);
    }

    html,body{height:100%}
    *{box-sizing:border-box}
    body{
      font-family: system-ui,-apple-system,Segoe UI,Roboto,Apple SD Gothic Neo,Malgun Gothic,Apple Color Emoji,Noto Color Emoji,sans-serif;
      line-height:1.6;
      margin:0;
      color:var(--ink);
      background:var(--bg);
      -webkit-tap-highlight-color: transparent;
      scroll-behavior:smooth;
    }

    .wrap{
      max-width: 880px;
      margin: 0 auto;
      padding: clamp(16px, 4vw, 28px);
      padding-bottom: 120px; /* í•˜ë‹¨ ê³ ì • ë²„íŠ¼ ê³µê°„ */
    }

    header h1{
      margin: 6px 0 8px;
      font-size: clamp(22px, 4.5vw, 32px);
      color: var(--brand);
      letter-spacing:-.02em;
    }

    header p{
      margin:0 0 16px;
      font-size: 14px;
      color:#555;
      background:#eef3ff;
      border:1px solid #d8e3ff;
      padding:10px 12px;
      border-radius:10px;
    }

    .meter{
      display:flex; align-items:center; gap:10px;
      margin: 10px 0 18px;
    }
    .meter-bar{
      flex:1; height:8px; background:#e9edf6; border-radius:999px; overflow:hidden;
    }
    .meter-bar > span{
      display:block; height:100%; width:0%; background:var(--brand);
      transition:width .25s ease;
    }
    .meter-text{ font-size:13px; color:#555; min-width:88px; text-align:right;}

    h2{
      font-size: clamp(18px, 3.8vw, 22px);
      margin: 6px 0 8px;
    }

    .question{
      margin:14px 0;
      padding:14px;
      background:var(--card);
      border-radius: var(--radius);
      border:1px solid var(--line);
      box-shadow: var(--shadow);
    }
    .question h3{
      margin:0 0 10px;
      font-size: clamp(16px, 3.6vw, 18px);
      line-height:1.45;
    }

    /* ì˜µì…˜ì„ í° í„°ì¹˜ ì˜ì—­ìœ¼ë¡œ */
    .options{
      display:grid;
      grid-template-columns: repeat(2, minmax(0,1fr));
      gap:8px;
    }
    @media (min-width: 720px){
      .options{ grid-template-columns: repeat(4, minmax(0,1fr)); }
    }
    .options label{
      display:flex; align-items:center; gap:8px;
      border:1px solid var(--line);
      border-radius:10px;
      padding:10px 12px;
      background:#fff;
      cursor:pointer;
      user-select:none;
      font-size:14px;
      transition: border-color .2s ease, box-shadow .2s ease, transform .06s ease;
      min-height:44px;
    }
    .options label:active{ transform: scale(.99); }
    .options input[type="radio"]{
      appearance:none; width:18px; height:18px; border-radius:50%;
      border:2px solid #aab3c5; outline:none; display:inline-block; position:relative; flex:0 0 auto;
    }
    .options input[type="radio"]::after{
      content:""; position:absolute; inset:2px; border-radius:50%; background:transparent;
      transition: background .2s ease;
    }
    .options label:has(input[type="radio"]:checked){
      border-color: var(--brand);
      box-shadow: 0 0 0 3px rgba(11,87,208,.12);
    }
    .options input[type="radio"]:checked{ border-color: var(--brand); }
    .options input[type="radio"]:checked::after{ background: var(--brand); }

    /* ë¯¸ì‘ë‹µ ê°•ì¡° */
    .question.unanswered{
      border-color:#ffb9b9;
      box-shadow:0 0 0 3px rgba(198,40,40,.15);
    }

    /* í•˜ë‹¨ ê³ ì • ì•¡ì…˜ */
    .actionbar{
      position: fixed;
      left:0; right:0; bottom:0;
      padding: 12px calc(16px + env(safe-area-inset-right)) calc(12px + env(safe-area-inset-bottom)) calc(16px + env(safe-area-inset-left));
      background:rgba(255,255,255,.96);
      border-top:1px solid var(--line);
      backdrop-filter:saturate(1.2) blur(6px);
      display:flex; gap:10px; justify-content:center;
      z-index: 30;
    }
    .btn{
      appearance:none; border:none;
      background:var(--brand); color:#fff;
      padding:14px 18px; font-size:16px; border-radius:12px; cursor:pointer;
      box-shadow: 0 8px 18px rgba(11,87,208,.22);
      min-width: 220px;
    }
    .btn:disabled{ opacity:.5; cursor:not-allowed; box-shadow:none; }
    .btn-subtle{
      background:#eef3ff; color:#21427a; box-shadow:none;
    }

    /* í† ìŠ¤íŠ¸ ì•Œë¦¼ */
    .toast{
      position: fixed; left:50%; transform:translateX(-50%);
      top: 12px; z-index: 40;
      background:#111; color:#fff; padding:10px 14px; border-radius:999px;
      font-size:13px; box-shadow:0 10px 20px rgba(0,0,0,.2);
      opacity:0; pointer-events:none; transition: opacity .2s ease, transform .2s ease;
    }
    .toast.show{ opacity:1; pointer-events:auto; transform: translate(-50%, 0); }

    /* ëª¨ë‹¬(ê²°ê³¼ íŒì—…) */
    .overlay{
      position: fixed; inset:0; background: rgba(0,0,0,.44);
      backdrop-filter: blur(2px);
      opacity:0; pointer-events:none; transition: opacity .2s ease;
      z-index: 90;
    }
    .overlay.open{ opacity:1; pointer-events:auto; }

    .modal{
      position: fixed; left:50%; top:50%;
      transform: translate(-50%,-50%) scale(.98);
      width: min(92vw, 560px);
      background:#fff; border-radius:16px; border:1px solid var(--line);
      box-shadow: 0 18px 44px rgba(0,0,0,.2);
      padding: 18px 18px 16px;
      opacity:0; pointer-events:none; transition: opacity .2s ease, transform .2s ease;
      z-index: 100;
    }
    .modal.open{ opacity:1; pointer-events:auto; transform: translate(-50%,-50%) scale(1); }
    .modal header{
      display:flex; align-items:center; justify-content:space-between; gap:10px;
      margin-bottom: 6px;
    }
    .modal header h3{ margin:0; font-size:18px; }
    .modal .close{
      appearance:none; border:none; background:transparent; font-size:22px; line-height:1; cursor:pointer;
      padding:6px; border-radius:8px;
    }
    .modal .close:focus{ outline:2px solid var(--brand) }

    .result-box{ text-align:center; padding:10px 8px 6px; }
    .result-box img{ max-width:120px; margin-bottom:10px; }
    .result-score{ font-size:42px; font-weight:800; margin:6px 0 4px; letter-spacing:.02em; }
    .result-main{ font-size:20px; margin: 4px 0; }
    .result-sub{ font-size:14px; opacity:.9; margin:2px 0 10px; }

    /* ê²°ê³¼ í…Œë§ˆ ìƒ‰ */
    .modal.normal .result-wrap{ background: var(--ok-bg); color: var(--ok-ink); border:1px solid #b2ebf2; }
    .modal.warning .result-wrap{ background: var(--warn-bg); color: var(--warn-ink); border:1px solid #ffe0b2; }
    .modal.danger .result-wrap{ background: var(--danger-bg); color: var(--danger-ink); border:1px solid #ffcdd2; }

    .result-wrap{
      border-radius: 14px; padding:16px; margin: 6px 0 12px;
    }

    .modal .actions{
      display:flex; gap:10px; justify-content:center; flex-wrap:wrap;
    }
    .modal .actions .btn{ min-width: 140px; }
    .modal .actions .btn-subtle{ background:#f1f3f9; color:#2b3b57; }

    /* ìŠ¤í¬ë¦°ë¦¬ë” ì „ìš© */
    .sr-only{
      position: absolute !important; width:1px; height:1px; margin:-1px; padding:0;
      overflow:hidden; clip:rect(0,0,0,0); white-space:nowrap; border:0;
    }

    @media (prefers-reduced-motion: reduce){
      *{ transition:none !important; animation:none !important; }
    }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <h1>í‚¹ìƒ· ê²Œì„ì¤‘ë… ìê°€ì§„ë‹¨ í…ŒìŠ¤íŠ¸</h1>
      <p>
        â€» ì´ í…ŒìŠ¤íŠ¸ëŠ” <strong>ìê°€ì§„ë‹¨</strong>ìš©ì´ë©°, ì‹¬ë¦¬ì ì¸ ì–´ë ¤ì›€ì„ ì ê²€Â·ì˜ˆë°©í•˜ê¸° ìœ„í•œ ì°¸ê³  ìë£Œì…ë‹ˆë‹¤.
        ì •í™•í•œ ì§„ë‹¨ì„ ìœ„í•´ì„œëŠ” ì „ë¬¸ê°€ì™€ì˜ ìƒë‹´ì´ í•„ìš”í•©ë‹ˆë‹¤.
      </p>
      <div class="meter" aria-hidden="true">
        <div class="meter-bar" aria-hidden="true"><span id="meterFill" style="width:0%"></span></div>
        <div class="meter-text"><span id="answered">0</span> / 16</div>
      </div>
    </header>

    <div class="section">
      <h2>ìê°€ì§„ë‹¨ ë¬¸í•­</h2>

      <!-- ì§ˆë¬¸ë“¤ -->
      <div class="question" id="qbox1"><h3>1. ë‚˜ëŠ” ì•„ì¹¨ ì´ˆê¸°í™” ì „ ê²½ê¸°ì¥ì„ í•œë‹¤.</h3>
        <div class="options">
          <label><input type="radio" name="q1" value="0"> ì „í˜€ ê·¸ë ‡ì§€ ì•Šë‹¤</label>
          <label><input type="radio" name="q1" value="1"> ê·¸ë ‡ì§€ ì•Šë‹¤</label>
          <label><input type="radio" name="q1" value="2"> ê·¸ë ‡ë‹¤</label>
          <label><input type="radio" name="q1" value="3"> ë§¤ìš° ê·¸ë ‡ë‹¤</label>
        </div>
      </div>

      <div class="question" id="qbox2"><h3>2. ë‚˜ëŠ” í‚¹ìƒ·ì„ ì¢…ë£Œ í›„ ë‹¤ì‹œ ì¼œê¸°ë„ í•œë‹¤.</h3>
        <div class="options">
          <label><input type="radio" name="q2" value="0"> ì „í˜€ ê·¸ë ‡ì§€ ì•Šë‹¤</label>
          <label><input type="radio" name="q2" value="1"> ê·¸ë ‡ì§€ ì•Šë‹¤</label>
          <label><input type="radio" name="q2" value="2"> ê·¸ë ‡ë‹¤</label>
          <label><input type="radio" name="q2" value="3"> ë§¤ìš° ê·¸ë ‡ë‹¤</label>
        </div>
      </div>

      <div class="question" id="qbox3"><h3>3. ë‚˜ëŠ” í‚¹ìƒ·ì„ ëª»í•˜ê²Œ ë˜ë©´ ì´ˆì¡°í•˜ë‹¤.</h3>
        <div class="options">
          <label><input type="radio" name="q3" value="0"> ì „í˜€ ê·¸ë ‡ì§€ ì•Šë‹¤</label>
          <label><input type="radio" name="q3" value="1"> ê·¸ë ‡ì§€ ì•Šë‹¤</label>
          <label><input type="radio" name="q3" value="2"> ê·¸ë ‡ë‹¤</label>
          <label><input type="radio" name="q3" value="3"> ë§¤ìš° ê·¸ë ‡ë‹¤</label>
        </div>
      </div>

      <div class="question" id="qbox4"><h3>4. ë‚˜ëŠ” ê²½ê¸°ì¥ì—ì„œ ê°™ì€ ìœ ì €ê°€ 2íšŒì´ìƒ ê³µê²©í•˜ë©´ ë¶„ë…¸í•œë‹¤.</h3>
        <div class="options">
          <label><input type="radio" name="q4" value="0"> ì „í˜€ ê·¸ë ‡ì§€ ì•Šë‹¤</label>
          <label><input type="radio" name="q4" value="1"> ê·¸ë ‡ì§€ ì•Šë‹¤</label>
          <label><input type="radio" name="q4" value="2"> ê·¸ë ‡ë‹¤</label>
          <label><input type="radio" name="q4" value="3"> ë§¤ìš° ê·¸ë ‡ë‹¤</label>
        </div>
      </div>

      <div class="question" id="qbox5"><h3>5. ë‚˜ëŠ” ì„±ê²€ì´ë‚˜ ì‚¬ë¼ì§„ìœ ì  ì‹œì‘ ì „ ì†ì—ì„œ ë•€ì´ë‚œë‹¤.</h3>
        <div class="options">
          <label><input type="radio" name="q5" value="0"> ì „í˜€ ê·¸ë ‡ì§€ ì•Šë‹¤</label>
          <label><input type="radio" name="q5" value="1"> ê·¸ë ‡ì§€ ì•Šë‹¤</label>
          <label><input type="radio" name="q5" value="2"> ê·¸ë ‡ë‹¤</label>
          <label><input type="radio" name="q5" value="3"> ë§¤ìš° ê·¸ë ‡ë‹¤</label>
        </div>
      </div>

      <div class="question" id="qbox6"><h3>6. ë‚˜ëŠ” ë‹¤ë¥¸ í•  ì¼ì´ ìˆì–´ë„ í‚¹ìƒ·ì„ ìš°ì„  í•œë‹¤.</h3>
        <div class="options">
          <label><input type="radio" name="q6" value="0"> ì „í˜€ ê·¸ë ‡ì§€ ì•Šë‹¤</label>
          <label><input type="radio" name="q6" value="1"> ê·¸ë ‡ì§€ ì•Šë‹¤</label>
          <label><input type="radio" name="q6" value="2"> ê·¸ë ‡ë‹¤</label>
          <label><input type="radio" name="q6" value="3"> ë§¤ìš° ê·¸ë ‡ë‹¤</label>
        </div>
      </div>

      <div class="question" id="qbox7"><h3>7. ë‚˜ëŠ” ê³°ì‚¬ëƒ¥ì—ì„œ ì§‘ê²°ì„ ë†“ì¹˜ë©´ í™”ê°€ë‚œë‹¤.</h3>
        <div class="options">
          <label><input type="radio" name="q7" value="0"> ì „í˜€ ê·¸ë ‡ì§€ ì•Šë‹¤</label>
          <label><input type="radio" name="q7" value="1"> ê·¸ë ‡ì§€ ì•Šë‹¤</label>
          <label><input type="radio" name="q7" value="2"> ê·¸ë ‡ë‹¤</label>
          <label><input type="radio" name="q7" value="3"> ë§¤ìš° ê·¸ë ‡ë‹¤</label>
        </div>
      </div>

      <div class="question" id="qbox8"><h3>8. ë‚˜ëŠ” í‚¹ìƒ·ì„ í•  ë•Œ ê°€ì¥ í¸ì•ˆí•¨ì„ ëŠë‚€ë‹¤.</h3>
        <div class="options">
          <label><input type="radio" name="q8" value="0"> ì „í˜€ ê·¸ë ‡ì§€ ì•Šë‹¤</label>
          <label><input type="radio" name="q8" value="1"> ê·¸ë ‡ì§€ ì•Šë‹¤</label>
          <label><input type="radio" name="q8" value="2"> ê·¸ë ‡ë‹¤</label>
          <label><input type="radio" name="q8" value="3"> ë§¤ìš° ê·¸ë ‡ë‹¤</label>
        </div>
      </div>

      <div class="question" id="qbox9"><h3>9. ë‚˜ëŠ” ê³¼ë„í•˜ê²Œ í‚¹ìƒ·ì— ëª°ì…í•´ì„œ ì¼ì— ì§‘ì¤‘í•˜ì§€ ëª»í•œë‹¤.</h3>
        <div class="options">
          <label><input type="radio" name="q9" value="0"> ì „í˜€ ê·¸ë ‡ì§€ ì•Šë‹¤</label>
          <label><input type="radio" name="q9" value="1"> ê·¸ë ‡ì§€ ì•Šë‹¤</label>
          <label><input type="radio" name="q9" value="2"> ê·¸ë ‡ë‹¤</label>
          <label><input type="radio" name="q9" value="3"> ë§¤ìš° ê·¸ë ‡ë‹¤</label>
        </div>
      </div>

      <div class="question" id="qbox10"><h3>10. ë‚˜ëŠ” í‚¹ìƒ·ì˜ ì „ë§ëŒ€ë¥¼ í•˜ì§€ ëª»í•˜ë©´ ì´ˆì¡°í•˜ë‹¤.</h3>
        <div class="options">
          <label><input type="radio" name="q10" value="0"> ì „í˜€ ê·¸ë ‡ì§€ ì•Šë‹¤</label>
          <label><input type="radio" name="q10" value="1"> ê·¸ë ‡ì§€ ì•Šë‹¤</label>
          <label><input type="radio" name="q10" value="2"> ê·¸ë ‡ë‹¤</label>
          <label><input type="radio" name="q10" value="3"> ë§¤ìš° ê·¸ë ‡ë‹¤</label>
        </div>
      </div>

      <div class="question" id="qbox11"><h3>11. ë‚˜ëŠ” í‚¹ìƒ·ì„ í•˜ë©´ì„œ ìƒí™œì´ ë¶ˆê·œì¹™í•´ì¡Œë‹¤.</h3>
        <div class="options">
          <label><input type="radio" name="q11" value="0"> ì „í˜€ ê·¸ë ‡ì§€ ì•Šë‹¤</label>
          <label><input type="radio" name="q11" value="1"> ê·¸ë ‡ì§€ ì•Šë‹¤</label>
          <label><input type="radio" name="q11" value="2"> ê·¸ë ‡ë‹¤</label>
          <label><input type="radio" name="q11" value="3"> ë§¤ìš° ê·¸ë ‡ë‹¤</label>
        </div>
      </div>

      <div class="question" id="qbox12"><h3>12. ë‚˜ëŠ” ì •í•´ì§„ ì‹œê°„ê¹Œì§€ë§Œ í‚¹ìƒ·ì„ í•˜ê² ë‹¤ëŠ” ì•½ì†ì„ ì§€í‚¤ì§€ ëª»í•œë‹¤.</h3>
        <div class="options">
          <label><input type="radio" name="q12" value="0"> ì „í˜€ ê·¸ë ‡ì§€ ì•Šë‹¤</label>
          <label><input type="radio" name="q12" value="1"> ê·¸ë ‡ì§€ ì•Šë‹¤</label>
          <label><input type="radio" name="q12" value="2"> ê·¸ë ‡ë‹¤</label>
          <label><input type="radio" name="q12" value="3"> ë§¤ìš° ê·¸ë ‡ë‹¤</label>
        </div>
      </div>

      <div class="question" id="qbox13"><h3>13. ë‚˜ëŠ” ê³¼ê¸ˆì„ ì¤„ì¸ë‹¤ê³  ë‹¤ì§í•˜ë©° ê³¼ê¸ˆì„ í•œë‹¤.</h3>
        <div class="options">
          <label><input type="radio" name="q13" value="0"> ì „í˜€ ê·¸ë ‡ì§€ ì•Šë‹¤</label>
          <label><input type="radio" name="q13" value="1"> ê·¸ë ‡ì§€ ì•Šë‹¤</label>
          <label><input type="radio" name="q13" value="2"> ê·¸ë ‡ë‹¤</label>
          <label><input type="radio" name="q13" value="3"> ë§¤ìš° ê·¸ë ‡ë‹¤</label>
        </div>
      </div>

      <div class="question" id="qbox14"><h3>14. ë‚˜ëŠ” í‚¹ìƒ·ì„ ë– ë‚˜ê³  ì‹¶ë‹¤.</h3>
        <div class="options">
          <label><input type="radio" name="q14" value="0"> ì „í˜€ ê·¸ë ‡ì§€ ì•Šë‹¤</label>
          <label><input type="radio" name="q14" value="1"> ê·¸ë ‡ì§€ ì•Šë‹¤</label>
          <label><input type="radio" name="q14" value="2"> ê·¸ë ‡ë‹¤</label>
          <label><input type="radio" name="q14" value="3"> ë§¤ìš° ê·¸ë ‡ë‹¤</label>
        </div>
      </div>

      <div class="question" id="qbox15"><h3>15. ë‚˜ëŠ” ì§€ì¸ê³¼ ì•½ì†ëœ ìë¦¬ì—ì„œ ëª°ë˜ í‚¹ìƒ·ì„ ì¼  ì ì´ ìˆë‹¤.</h3>
        <div class="options">
          <label><input type="radio" name="q15" value="0"> ì „í˜€ ê·¸ë ‡ì§€ ì•Šë‹¤</label>
          <label><input type="radio" name="q15" value="1"> ê·¸ë ‡ì§€ ì•Šë‹¤</label>
          <label><input type="radio" name="q15" value="2"> ê·¸ë ‡ë‹¤</label>
          <label><input type="radio" name="q15" value="3"> ë§¤ìš° ê·¸ë ‡ë‹¤</label>
        </div>
      </div>

      <div class="question" id="qbox16"><h3>16. ë‚˜ëŠ” íš¨ìœ¨ ì¢‹ì€ íŒ¨í‚¤ì§€ë¥¼ ëª» ì‚¬ë©´ ë§¤ìš° ë¶ˆì•ˆí•˜ê³  ìš°ìš¸í•´ì§„ë‹¤.</h3>
        <div class="options">
          <label><input type="radio" name="q16" value="0"> ì „í˜€ ê·¸ë ‡ì§€ ì•Šë‹¤</label>
          <label><input type="radio" name="q16" value="1"> ê·¸ë ‡ì§€ ì•Šë‹¤</label>
          <label><input type="radio" name="q16" value="2"> ê·¸ë ‡ë‹¤</label>
          <label><input type="radio" name="q16" value="3"> ë§¤ìš° ê·¸ë ‡ë‹¤</label>
        </div>
      </div>
    </div>
  </div>

  <!-- í•˜ë‹¨ ê³ ì • ì•¡ì…˜ë°” -->
  <div class="actionbar" role="region" aria-label="í…ŒìŠ¤íŠ¸ ë™ì‘">
    <button id="resetBtn" class="btn btn-subtle" type="button">ì´ˆê¸°í™”</button>
    <button id="submitBtn" class="btn" type="button">ê²°ê³¼ í™•ì¸í•˜ê¸°</button>
  </div>

  <!-- í† ìŠ¤íŠ¸ -->
  <div id="toast" class="toast" role="status" aria-live="polite">ëª¨ë“  ë¬¸í•­ì— ì‘ë‹µí•´ì£¼ì„¸ìš”.</div>

  <!-- ê²°ê³¼ ì˜¤ë²„ë ˆì´ & ëª¨ë‹¬ -->
  <div id="overlay" class="overlay" hidden></div>

  <div id="resultModal" class="modal" role="dialog" aria-modal="true"
       aria-labelledby="resultTitle" aria-describedby="resultDesc" hidden>
    <header>
      <h3 id="resultTitle">ìê°€ì§„ë‹¨ ê²°ê³¼</h3>
      <button class="close" type="button" aria-label="ë‹«ê¸°" id="closeModalBtn">Ã—</button>
    </header>

    <div class="result-wrap">
      <div class="result-box">
        <img id="resultImg" src="" alt="ê²°ê³¼ ì´ë¯¸ì§€">
        <div class="result-score" id="score">0ì </div>
        <div class="result-main" id="mainMsg"></div>
        <div class="result-sub" id="subMsg"></div>
      </div>
    </div>

    <p id="resultDesc" class="sr-only">ì ìˆ˜ì™€ ìƒíƒœê°€ í‘œì‹œë©ë‹ˆë‹¤.</p>

    <div class="actions">
      <button type="button" class="btn btn-subtle" id="editBtn">ë‹µë³€ ìˆ˜ì •í•˜ê¸°</button>
      <button type="button" class="btn" id="retakeBtn">ë‹¤ì‹œ í•˜ê¸°</button>
    </div>
  </div>

  <script>
    // ìœ í‹¸: í† ìŠ¤íŠ¸
    function showToast(msg){
      const t = document.getElementById('toast');
      t.textContent = msg;
      t.classList.add('show');
      clearTimeout(showToast._t);
      showToast._t = setTimeout(()=> t.classList.remove('show'), 1800);
    }

    // ì§„í–‰ë„ ì—…ë°ì´íŠ¸
    function updateProgress(){
      let answered = 0;
      for(let i=1;i<=16;i++){
        const sel = document.querySelector('input[name="q'+i+'"]:checked');
        if(sel) answered++;
      }
      const percent = Math.round((answered/16)*100);
      document.getElementById('answered').textContent = answered;
      document.getElementById('meterFill').style.width = percent + '%';
      // ë²„íŠ¼ í™œì„±/ë¹„í™œì„±ì€ ê°•ì œí•˜ì§€ ì•ŠìŒ(ì¤‘ê°„ í™•ì¸ìš©ë„ ê³ ë ¤)
    }

    // ì²« ë¯¸ì‘ë‹µ ë¬¸í•­ ì°¾ê¸°
    function getFirstUnanswered(){
      for(let i=1;i<=16;i++){
        const sel = document.querySelector('input[name="q'+i+'"]:checked');
        if(!sel) return i;
      }
      return null;
    }

    // ë¬¸í•­ ë°•ìŠ¤ ê°•ì¡°/í•´ì œ
    function markUnanswered(index){
      for(let i=1;i<=16;i++){
        document.getElementById('qbox'+i).classList.remove('unanswered');
      }
      if(index){
        const box = document.getElementById('qbox'+index);
        box.classList.add('unanswered');
        box.scrollIntoView({behavior:'smooth', block:'center'});
      }
    }

    // ëª¨ë‹¬ ì œì–´: í¬ì»¤ìŠ¤ íŠ¸ë© í¬í•¨
    const overlay   = document.getElementById('overlay');
    const modal     = document.getElementById('resultModal');
    const closeBtn  = document.getElementById('closeModalBtn');
    const editBtn   = document.getElementById('editBtn');
    const retakeBtn = document.getElementById('retakeBtn');
    let lastActive  = null;
    let trapHandler = null;

    function openModal(){
      lastActive = document.activeElement;
      overlay.hidden = false;
      modal.hidden = false;
      // ê²°ê³¼ ë ˆë²¨ í´ë˜ìŠ¤ ìœ ì§€í•œ ì±„ë¡œ open í”Œë˜ê·¸ë§Œ í† ê¸€
      overlay.classList.add('open');
      modal.classList.add('open');
      document.body.style.overflow='hidden';

      // í¬ì»¤ìŠ¤ íŠ¸ë©
      const focusables = modal.querySelectorAll('button,[href],input,select,textarea,[tabindex]:not([tabindex="-1"])');
      const first = focusables[0], last = focusables[focusables.length-1];
      (first || closeBtn).focus();

      trapHandler = function(e){
        if(e.key === 'Escape'){ e.preventDefault(); closeModal(); return; }
        if(e.key !== 'Tab') return;
        if(focusables.length === 0) return;
        if(e.shiftKey){
          if(document.activeElement === first){ e.preventDefault(); last.focus(); }
        }else{
          if(document.activeElement === last){ e.preventDefault(); first.focus(); }
        }
      };
      modal.addEventListener('keydown', trapHandler);
    }

    function closeModal(){
      overlay.classList.remove('open');
      modal.classList.remove('open');
      document.body.style.overflow='';
      setTimeout(()=>{ overlay.hidden = true; modal.hidden = true; }, 180);
      if(trapHandler){ modal.removeEventListener('keydown', trapHandler); trapHandler = null; }
      if(lastActive) lastActive.focus();
    }

    overlay.addEventListener('click', closeModal);
    closeBtn.addEventListener('click', closeModal);
    editBtn.addEventListener('click', closeModal);
    retakeBtn.addEventListener('click', ()=>{
      // ëª¨ë“  ë¼ë””ì˜¤ í•´ì œ
      for(let i=1;i<=16;i++){
        const radios = document.querySelectorAll('input[name="q'+i+'"]');
        radios.forEach(r=> r.checked = false);
      }
      markUnanswered(null);
      updateProgress();
      closeModal();
      window.scrollTo({top:0, behavior:'smooth'});
    });

    // ê²°ê³¼ ê³„ì‚° ë° í‘œì‹œ
    function calculateResult(){
      let total = 0;
      let answered = 0;
      let firstUnans = null;

      for (let i = 1; i <= 16; i++) {
        const selected = document.querySelector('input[name="q'+i+'"]:checked');
        if (selected){
          total += parseInt(selected.value,10);
          answered++;
        }else if(!firstUnans){ firstUnans = i; }
      }

      if(answered < 16){
        markUnanswered(firstUnans);
        showToast('ëª¨ë“  ë¬¸í•­ì— ì‘ë‹µí•´ì£¼ì„¸ìš”.');
        return;
      }else{
        markUnanswered(null);
      }

      // DOM ìš”ì†Œ
      const scoreEl = document.getElementById("score");
      const img = document.getElementById("resultImg");
      const mainMsg = document.getElementById("mainMsg");
      const subMsg = document.getElementById("subMsg");

      // ì´ì „ ê²°ê³¼ í…Œë§ˆ í´ë˜ìŠ¤ ì œê±°
      modal.classList.remove('normal','warning','danger');

      // ê²°ê³¼ ë§µí•‘
      if (total <= 16) {
        scoreEl.textContent = total + "ì ";
        img.src = "/img/home/001.png";
        img.alt = "ì •ìƒ ìƒíƒœ ìºë¦­í„°";
        mainMsg.textContent = "ì•„ì§ê¹Œì§€ í‚¹ìƒ·ì˜ ë§¤ë ¥ì„ ëª» ëŠë¼ê³  ìˆëŠ” ì •ìƒ!";
        subMsg.textContent = "ì—°ë§¹ì›ë“¤ì´ ê¸°ë‹¤ë¦½ë‹ˆë‹¤. í•¨ê»˜ ëª¨í—˜ì„ ì‹œì‘í•´ë³´ì„¸ìš”!";
        modal.classList.add('normal');
      } else if (total <= 32) {
        scoreEl.textContent = total + "ì ";
        img.src = "/img/home/002.png";
        img.alt = "ì£¼ì˜ ìƒíƒœ ìºë¦­í„°";
        mainMsg.textContent = "ì—´ì‹¬íˆ í•˜ê³  ìˆêµ°ìš”! ì£¼ì˜ê°€ í•„ìš”í•©ë‹ˆë‹¤.";
        subMsg.textContent = "ì ë„ ì¤„ì—¬ê°€ë©° í”Œë ˆì´í•˜ëŠ” ìœ ì €ì˜ ê¸¸ì— ë“¤ì–´ì„°ìŠµë‹ˆë‹¤ ğŸ˜…";
        modal.classList.add('warning');
      } else {
        scoreEl.textContent = total + "ì ";
        img.src = "/img/home/003.png";
        img.alt = "ìœ„í—˜ ìƒíƒœ ìºë¦­í„°";
        mainMsg.textContent = "ìˆ˜ë©´ ë¶€ì¡±! ìœ„í—˜ ì‹ í˜¸ ğŸš¨";
        subMsg.textContent = "í•˜ë£¨ ì •ë„ëŠ” í¸ì•ˆí•˜ê²Œ ì ë“¤ê¸°ë¥¼ ë°”ëë‹ˆë‹¤...";
        modal.classList.add('danger');
      }

      openModal();
    }

    // ì´ˆê¸°í™” ë²„íŠ¼
    document.getElementById('resetBtn').addEventListener('click', ()=>{
      for(let i=1;i<=16;i++){
        const radios = document.querySelectorAll('input[name="q'+i+'"]');
        radios.forEach(r=> r.checked = false);
      }
      markUnanswered(null);
      updateProgress();
      showToast('ëª¨ë“  ë¬¸í•­ì´ ì´ˆê¸°í™”ë˜ì—ˆìŠµë‹ˆë‹¤.');
      window.scrollTo({top:0, behavior:'smooth'});
    });

    // ì œì¶œ ë²„íŠ¼
    document.getElementById('submitBtn').addEventListener('click', calculateResult);

    // ì…ë ¥ ë³€í™” ì‹œ ì§„í–‰ë„ ì—…ë°ì´íŠ¸ + ë¯¸ì‘ë‹µ ê°•ì¡° í•´ì œ
    document.addEventListener('change', (e)=>{
      if(e.target && e.target.matches('input[type="radio"]')){
        const name = e.target.name; // q1 ~ q16
        const idx = name && parseInt(name.replace('q',''),10);
        if(idx) document.getElementById('qbox'+idx).classList.remove('unanswered');
        updateProgress();
      }
    });

    // êµ¬ë²„ì „ onclick í˜¸í™˜ì„ ìœ„í•´ ì „ì—­ ë…¸ì¶œ
    window.calculateResult = calculateResult;

    // ì²« ë Œë”
    updateProgress();
  </script>
</body>
</html>
